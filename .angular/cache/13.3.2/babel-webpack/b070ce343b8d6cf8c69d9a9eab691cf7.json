{"ast":null,"code":"import { CountriesService } from '../countries.service';\nimport { Store } from '@ngrx/store';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../countries.service\";\nimport * as i2 from \"@ngrx/store\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"../countrydetails/countrydetails.component\";\n\nfunction RegionsComponent_option_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const region_r3 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\"\", region_r3.name, \" \");\n  }\n}\n\nfunction RegionsComponent_option_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const country_r4 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(country_r4.name);\n  }\n}\n\nfunction RegionsComponent_pm_countrydetails_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"pm-countrydetails\", 9);\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"country\", ctx_r2.selectedCountry);\n  }\n}\n\nexport let RegionsComponent = /*#__PURE__*/(() => {\n  class RegionsComponent {\n    constructor(httpService, store) {\n      this.httpService = httpService;\n      this.store = store;\n      this.title = 'Region/Country selector';\n      this.isCountryDisabled = true;\n      this.isCountrySelected = false;\n      this.selectedCountryName = '';\n      this.selectedCountryCapital = '';\n      this.selectedCountryPopulation = '';\n      this.selectedCountryCurrencies = '';\n      this.selectedCountryFlag = '';\n      this.regionsList = [{\n        name: 'Europe'\n      }, {\n        name: 'Asia'\n      }];\n      this.storeCountriesAsia = this.store.select(state => state.AsianCountries);\n      this.storeCountriesEurope = this.store.select(state => state.EuropeanCountries);\n    }\n\n    changeRegion(region) {\n      if (region === 'Default') {\n        this.changeCountry('Default');\n      } else {\n        console.log('European countries ' + this.countryListEurope); // empty first time\n\n        console.log('Asian countries ' + this.countryListAsia); // empty first time\n\n        if (region === 'Europe' && this.countryListEurope !== undefined) {\n          console.log('Add existing europeancountries from store'); // this.countries = this.countryListEurope;\n\n          this.isCountrySelected = false;\n          this.countryListEurope = this.storeCountriesEurope;\n          this.countries = this.countryListEurope;\n          this.isCountryDisabled = false;\n        } else if (region === 'Asia' && this.countryListAsia !== undefined) {\n          console.log('Add existing asian countries from store'); // this.countries = this.countryListAsia;\n\n          this.countryListAsia = this.storeCountriesAsia;\n          this.countries = this.countryListAsia;\n          this.isCountrySelected = false;\n          this.isCountryDisabled = false;\n        } else {\n          console.log('Here 3'); // calls the http get on demand\n\n          this.httpService.getPosts(region).subscribe(response => {\n            if (region === 'Europe') {\n              // this.countryListEurope = response;\n              this.store.dispatch({\n                type: 'ADD_EUROPEANCOUNTRIES',\n                payload: {\n                  EuropeanCountries: response\n                }\n              });\n              this.countryListEurope = this.storeCountriesEurope;\n              this.countries = this.countryListEurope;\n              console.log('store europe list = ' + this.storeCountriesEurope);\n            }\n\n            if (region === 'Asia') {\n              // this.countryListAsia = response;\n              this.store.dispatch({\n                type: 'ADD_ASIANCOUNTRIES',\n                payload: {\n                  AsianCountries: response\n                }\n              });\n              this.countryListAsia = this.storeCountriesAsia;\n              this.countries = this.countryListAsia;\n              console.log('store asia list = ' + this.storeCountriesAsia);\n            }\n\n            this.isCountryDisabled = region === 'Default' ? true : false;\n            this.isCountrySelected = false;\n          }, error => {\n            console.log(error);\n          });\n        }\n      }\n    }\n\n    changeCountry(country) {\n      // find the selected country or leave undefined if default picked\n      this.selectedCountry = this.countries.filter(reg => reg.name === country);\n\n      if (country === 'Default') {\n        this.countries = []; // empties the dropdown list and leaves the default message which is disabled\n\n        this.isCountrySelected = false;\n        this.isCountryDisabled = true;\n      } else {\n        this.isCountrySelected = true;\n        this.isCountryDisabled = false;\n      }\n    }\n\n    ngOnInit() {}\n\n  }\n\n  RegionsComponent.ɵfac = function RegionsComponent_Factory(t) {\n    return new (t || RegionsComponent)(i0.ɵɵdirectiveInject(i1.CountriesService), i0.ɵɵdirectiveInject(i2.Store));\n  };\n\n  RegionsComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: RegionsComponent,\n    selectors: [[\"pm-regions\"]],\n    decls: 19,\n    vars: 4,\n    consts: [[1, \"form-group\"], [\"for\", \"region\"], [1, \"form-control\", 2, \"width\", \"400px\", 3, \"change\"], [\"value\", \"Default\"], [4, \"ngFor\", \"ngForOf\"], [2, \"height\", \"20px\"], [\"for\", \"country\"], [1, \"form-control\", 2, \"width\", \"400px\", 3, \"disabled\", \"change\"], [3, \"country\", 4, \"ngIf\"], [3, \"country\"]],\n    template: function RegionsComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"form\")(1, \"div\", 0)(2, \"label\", 1);\n        i0.ɵɵtext(3, \"Region\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(4, \"select\", 2);\n        i0.ɵɵlistener(\"change\", function RegionsComponent_Template_select_change_4_listener($event) {\n          return ctx.changeRegion($event.target.value);\n        });\n        i0.ɵɵelementStart(5, \"option\", 3);\n        i0.ɵɵtext(6, \"Choose a Region\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(7, RegionsComponent_option_7_Template, 2, 1, \"option\", 4);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelement(8, \"div\", 5);\n        i0.ɵɵelementStart(9, \"div\", 0)(10, \"label\", 6);\n        i0.ɵɵtext(11, \"Country\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(12, \"select\", 7);\n        i0.ɵɵlistener(\"change\", function RegionsComponent_Template_select_change_12_listener($event) {\n          return ctx.changeCountry($event.target.value);\n        });\n        i0.ɵɵelementStart(13, \"option\", 3);\n        i0.ɵɵtext(14, \"Choose a Country\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(15, RegionsComponent_option_15_Template, 2, 1, \"option\", 4);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelement(16, \"div\", 5)(17, \"div\", 5);\n        i0.ɵɵtemplate(18, RegionsComponent_pm_countrydetails_18_Template, 1, 1, \"pm-countrydetails\", 8);\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(7);\n        i0.ɵɵproperty(\"ngForOf\", ctx.regionsList);\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"disabled\", ctx.isCountryDisabled);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngForOf\", ctx.countries);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngIf\", ctx.isCountrySelected);\n      }\n    },\n    directives: [i3.NgForOf, i3.NgIf, i4.CountrydetailsComponent],\n    styles: [\"\"]\n  });\n  return RegionsComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}